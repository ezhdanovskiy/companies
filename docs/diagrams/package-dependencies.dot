digraph PackageDependencies {
    rankdir=TB;
    node [shape=box, style="rounded,filled", fillcolor=lightblue];
    edge [color=gray];
    
    // External services
    subgraph cluster_external {
        label="External Services";
        style=dotted;
        fillcolor=lightyellow;
        node [fillcolor=lightyellow];
        
        PostgreSQL [shape=cylinder, fillcolor=lightgreen];
        Kafka [shape=cylinder, fillcolor=lightgreen];
        Zookeeper [shape=cylinder, fillcolor=lightgreen];
    }
    
    // Main entry point
    main [label="cmd/companies\nmain.go", fillcolor=darkseagreen];
    
    // Application layer
    subgraph cluster_application {
        label="Application Layer";
        style=filled;
        fillcolor=lavender;
        node [fillcolor=lavender];
        
        application [label="application/\napplication.go"];
        logger [label="application/\nlogger.go"];
    }
    
    // HTTP layer
    subgraph cluster_http {
        label="HTTP Layer";
        style=filled;
        fillcolor=lightcoral;
        node [fillcolor=lightcoral];
        
        server [label="http/\nserver.go"];
        handlers [label="http/\nhandlers.go"];
        requests [label="http/requests/\nDTOs"];
    }
    
    // Service layer
    subgraph cluster_service {
        label="Service Layer";
        style=filled;
        fillcolor=lightsteelblue;
        node [fillcolor=lightsteelblue];
        
        service [label="service/\nservice.go"];
    }
    
    // Repository layer
    subgraph cluster_repository {
        label="Repository Layer";
        style=filled;
        fillcolor=lightsalmon;
        node [fillcolor=lightsalmon];
        
        repository [label="repository/\nrepository.go"];
        entities [label="repository/\nentities.go"];
    }
    
    // Infrastructure components
    subgraph cluster_infrastructure {
        label="Infrastructure";
        style=filled;
        fillcolor=lightgray;
        node [fillcolor=lightgray];
        
        config [label="config/\nconfig.go"];
        kafka_producer [label="kafka/\nproducer.go"];
        kafka_message [label="kafka/\nmessage.go"];
        auth [label="auth/\njwt.go"];
        middlewares [label="middlewares/\nauth.go"];
    }
    
    // Core models
    models [label="models/\ncompany.go\nerrors.go", fillcolor=gold];
    
    // Test layer
    subgraph cluster_tests {
        label="Tests";
        style=dashed;
        fillcolor=lightpink;
        node [fillcolor=lightpink];
        
        integration_tests [label="tests/\nintegration_test.go"];
    }
    
    // Dependencies
    main -> application;
    
    application -> server;
    application -> config;
    application -> logger;
    application -> repository;
    application -> service;
    application -> kafka_producer;
    
    server -> handlers;
    server -> middlewares;
    handlers -> service;
    handlers -> requests;
    handlers -> auth;
    
    middlewares -> auth;
    
    service -> repository;
    service -> kafka_producer;
    service -> models;
    
    kafka_producer -> kafka_message;
    kafka_producer -> Kafka;
    
    repository -> entities;
    repository -> models;
    repository -> PostgreSQL;
    
    // Kafka dependencies
    Kafka -> Zookeeper;
    
    // Test dependencies
    integration_tests -> application [style=dashed];
    integration_tests -> PostgreSQL [style=dashed];
    integration_tests -> Kafka [style=dashed];
}